[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "GEOSPATIAL ANALYTICS",
    "section": "",
    "text": "Content Disclaimer\n\n\n\n\n\nThis micro-site is intended as a personal portfolio and for sharing a learning journey only.\nOther than common facts or quotes from other parties, any views, opinions, or comments herein represented in this site are personal and belong solely to the site owner and do not represent those people, institutions or organisations that the owner may or may not be associated with professionally or within a personal capacity unless explicitly stated.\nThis site’s owner makes no representation of the accuracy or completeness of any display information or any link on this site. The owner will not be liable for any errors, omissions or availability of any information. The owner will not be liable for any of your losses, injuries, or damages from using the content within this site."
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site\n\n1 + 1\n\n[1] 2"
  },
  {
    "objectID": "ho/ho1_1.html",
    "href": "ho/ho1_1.html",
    "title": "Data Wrangling with R",
    "section": "",
    "text": "This post covers the basic wrangling technique for geospatial data such as -"
  },
  {
    "objectID": "ho/ho1_1.html#loading-r-packages",
    "href": "ho/ho1_1.html#loading-r-packages",
    "title": "Data Wrangling with R",
    "section": "1.1 Loading R Packages",
    "text": "1.1 Loading R Packages\nThe following are the packages required for the hands-on exercise :\n\n\n\n\n\n\n⇳ Usage of the code chunk below :\n\n\n\n\n\np_load( ) - pacman - to load packages into R environment. This function will attempt to install the package from CRAN or the pacman repository list if it is not installed.\n\n\n\n\npacman::p_load(sf, tidyverse)"
  },
  {
    "objectID": "ho/ho1_1.html#data-importation",
    "href": "ho/ho1_1.html#data-importation",
    "title": "Data Wrangling with R",
    "section": "1.2 Data Importation",
    "text": "1.2 Data Importation\n\n1.2.1 Import Geospatial Data\n\n\n\n\n\n\n⇳ Usage of the code chunk below :\n\n\n\n\n\nst_read( ) - sf- to read the shapefile into simple features data frame format with 2 arguments below :\n\ndsn - define data path.\nlayer - provide shapefile name.\n\n\n\n\n\n1.2.1.1 Polygon feature data in shapefile format\nImport Singapore Master Plan 2014 Subzone Boundary from data.gov.sg into mpsz simple feature data frame -\n\nmpsz = st_read(dsn = \"data/geospatial\",\n               layer = \"MP14_SUBZONE_WEB_PL\")\n\nReading layer `MP14_SUBZONE_WEB_PL' from data source \n  `D:\\jephOstan\\geospatial_jtz\\ho\\data\\geospatial' using driver `ESRI Shapefile'\nSimple feature collection with 323 features and 15 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2667.538 ymin: 15748.72 xmax: 56396.44 ymax: 50256.33\nProjected CRS: SVY21\n\n\nMetrics used in the output above -\n\nGeometry type : Refers to the type of shapes represented in the spatial data.\nDimension : “XY” means that the geometries are defined in a two-dimensional space with an X (longitude) and a Y (latitude) coordinate.\nBounding Box : The bounding box represents the extent of the spatial dataset, defined by the minimum and maximum coordinates in each dimension.\n\n“xmin”, “ymin”, “xmax”, and “ymax” represent the minimum longitude, minimum latitude, maximum longitude, and maximum latitude, respectively.\n\nProjected CRS : Coordinate Reference System (CRS) is a system that uses one or more numbers or coordinates to determine the position of a point or a geometric element uniquely.\nSVY21 is a specific type of CRS, which stands for the Singapore Transverse Mercator projection, used for creating maps and conducting land surveys in Singapore.\n\n\n\n1.2.1.2 Polyline feature data in shapefile format\nImport cycling path from LTADataMall\n\ncyclingPath = st_read(dsn = \"data/geospatial\",\n                      layer = \"CyclingPath\")\n\nReading layer `CyclingPath' from data source \n  `D:\\jephOstan\\geospatial_jtz\\ho\\data\\geospatial' using driver `ESRI Shapefile'\nSimple feature collection with 2248 features and 2 fields\nGeometry type: MULTILINESTRING\nDimension:     XY\nBounding box:  xmin: 11854.32 ymin: 28347.98 xmax: 42626.09 ymax: 48948.15\nProjected CRS: SVY21\n\n\n\n\n1.2.1.3 GIS data in kml format\n\npreschool = st_read(\"data/geospatial/pre-schools-location-kml.kml\")\n\nReading layer `PRESCHOOLS_LOCATION' from data source \n  `D:\\jephOstan\\geospatial_jtz\\ho\\data\\geospatial\\pre-schools-location-kml.kml' \n  using driver `KML'\nSimple feature collection with 1925 features and 2 fields\nGeometry type: POINT\nDimension:     XYZ\nBounding box:  xmin: 103.6824 ymin: 1.247759 xmax: 103.9897 ymax: 1.462134\nz_range:       zmin: 0 zmax: 0\nGeodetic CRS:  WGS 84\n\n\nUnlike SVY21 for other dataset, this preschool dataset is WGS 84 - which stands for World Geodetic System 1984 - a global reference coordinate system used by the Global Positioning System (GPS).\n\n\n\n1.2.2 Import Aspatial Data\n\n\n\n\n\n\n⇳ Usage of the code chunk below :\n\n\n\n\n\nread_csv( ) - readr - to read a CSV file.\n\n\n\n\nlistings &lt;- read_csv(\"data/aspatial/listings.csv\")"
  },
  {
    "objectID": "ho/ho1_1.html#initial-data-inspection",
    "href": "ho/ho1_1.html#initial-data-inspection",
    "title": "Data Wrangling with R",
    "section": "1.3 Initial Data Inspection",
    "text": "1.3 Initial Data Inspection"
  },
  {
    "objectID": "ho/ho1_1.html#data-inspection",
    "href": "ho/ho1_1.html#data-inspection",
    "title": "Data Wrangling with R",
    "section": "1.3 Data Inspection",
    "text": "1.3 Data Inspection\n\n1.3.1 Retrieve Information\n\n\n\n\n\n\n⇳ Usage of the code chunk below :\n\n\n\n\n\nst_geometry( ) - sf- to get geometry information from an sf object.\n\n\n\n\nst_geometry(mpsz)\n\nGeometry set for 323 features \nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2667.538 ymin: 15748.72 xmax: 56396.44 ymax: 50256.33\nProjected CRS: SVY21\nFirst 5 geometries:\n\n\nWith “mpsz$geom” or specifically indiate the position of the geometry column, “mpsz[[1]]” can also produced the same output as shown above.\n\n\n\n\n\n\n⇳ Usage of the code chunk below :\n\n\n\n\n\nglimpse( ) - dplyr- to reveals the data type of each feature / variable. Specify an integer behind to reveal the amount of information to be displayed.\n\ndbl shorts for “Double-precision” value.\n\n\n\n\n\nglimpse(mpsz,60)\n\nRows: 323\nColumns: 16\n$ OBJECTID   &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, …\n$ SUBZONE_NO &lt;int&gt; 1, 1, 3, 8, 3, 7, 9, 2, 13, 7, 12, 6, 1…\n$ SUBZONE_N  &lt;chr&gt; \"MARINA SOUTH\", \"PEARL'S HILL\", \"BOAT Q…\n$ SUBZONE_C  &lt;chr&gt; \"MSSZ01\", \"OTSZ01\", \"SRSZ03\", \"BMSZ08\",…\n$ CA_IND     &lt;chr&gt; \"Y\", \"Y\", \"Y\", \"N\", \"N\", \"N\", \"N\", \"Y\",…\n$ PLN_AREA_N &lt;chr&gt; \"MARINA SOUTH\", \"OUTRAM\", \"SINGAPORE RI…\n$ PLN_AREA_C &lt;chr&gt; \"MS\", \"OT\", \"SR\", \"BM\", \"BM\", \"BM\", \"BM…\n$ REGION_N   &lt;chr&gt; \"CENTRAL REGION\", \"CENTRAL REGION\", \"CE…\n$ REGION_C   &lt;chr&gt; \"CR\", \"CR\", \"CR\", \"CR\", \"CR\", \"CR\", \"CR…\n$ INC_CRC    &lt;chr&gt; \"5ED7EB253F99252E\", \"8C7149B9EB32EEFC\",…\n$ FMEL_UPD_D &lt;date&gt; 2014-12-05, 2014-12-05, 2014-12-05, 20…\n$ X_ADDR     &lt;dbl&gt; 31595.84, 28679.06, 29654.96, 26782.83,…\n$ Y_ADDR     &lt;dbl&gt; 29220.19, 29782.05, 29974.66, 29933.77,…\n$ SHAPE_Leng &lt;dbl&gt; 5267.381, 3506.107, 1740.926, 3313.625,…\n$ SHAPE_Area &lt;dbl&gt; 1630379.3, 559816.2, 160807.5, 595428.9…\n$ geometry   &lt;MULTIPOLYGON [m]&gt; MULTIPOLYGON (((31495.56 3…\n\n\n\n\n\n\n\n\n⇳ Usage of the code chunk below :\n\n\n\n\n\nhead( ) - utils - to return the top n features of mpsz. If n is not specified, top 6 (default) features will be displayed instead. Directly specified the integer works as well.\n\n\n\n\nhead(mpsz, n = 2)\n\nSimple feature collection with 2 features and 15 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 28160.23 ymin: 28369.47 xmax: 32362.39 ymax: 30177.73\nProjected CRS: SVY21\n  OBJECTID SUBZONE_NO    SUBZONE_N SUBZONE_C CA_IND   PLN_AREA_N PLN_AREA_C\n1        1          1 MARINA SOUTH    MSSZ01      Y MARINA SOUTH         MS\n2        2          1 PEARL'S HILL    OTSZ01      Y       OUTRAM         OT\n        REGION_N REGION_C          INC_CRC FMEL_UPD_D   X_ADDR   Y_ADDR\n1 CENTRAL REGION       CR 5ED7EB253F99252E 2014-12-05 31595.84 29220.19\n2 CENTRAL REGION       CR 8C7149B9EB32EEFC 2014-12-05 28679.06 29782.05\n  SHAPE_Leng SHAPE_Area                       geometry\n1   5267.381  1630379.3 MULTIPOLYGON (((31495.56 30...\n2   3506.107   559816.2 MULTIPOLYGON (((29092.28 30...\n\n\n\n\n\n\n\n\n⇳ Usage of the code chunk below :\n\n\n\n\n\nlist( ) - base - to create a tibble data frame that contain all different types of variables in &lt;listings&gt;.\n\n\n\n\nlist(listings)\n\n[[1]]\n# A tibble: 4,161 × 18\n       id name      host_id host_name neighbourhood_group neighbourhood latitude\n    &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;               &lt;chr&gt;            &lt;dbl&gt;\n 1  50646 Pleasant…  227796 Sujatha   Central Region      Bukit Timah       1.33\n 2  71609 Ensuite …  367042 Belinda   East Region         Tampines          1.35\n 3  71896 B&B  Roo…  367042 Belinda   East Region         Tampines          1.35\n 4  71903 Room 2-n…  367042 Belinda   East Region         Tampines          1.35\n 5 275344 15 mins … 1439258 Kay       Central Region      Bukit Merah       1.29\n 6 289234 Booking …  367042 Belinda   East Region         Tampines          1.34\n 7 294281 5 mins w… 1521514 Elizabeth Central Region      Newton            1.31\n 8 324945 Cozy Blu… 1439258 Kay       Central Region      Bukit Merah       1.29\n 9 330089 Cozy Blu… 1439258 Kay       Central Region      Bukit Merah       1.29\n10 330095 10 mins … 1439258 Kay       Central Region      Bukit Merah       1.29\n# ℹ 4,151 more rows\n# ℹ 11 more variables: longitude &lt;dbl&gt;, room_type &lt;chr&gt;, price &lt;dbl&gt;,\n#   minimum_nights &lt;dbl&gt;, number_of_reviews &lt;dbl&gt;, last_review &lt;date&gt;,\n#   reviews_per_month &lt;dbl&gt;, calculated_host_listings_count &lt;dbl&gt;,\n#   availability_365 &lt;dbl&gt;, number_of_reviews_ltm &lt;dbl&gt;, license &lt;chr&gt;\n\n\nFrom the output above, latitude and longitude are in decimal degree format, which best assumes it’s in wgs84 Geographic Coordinate System."
  },
  {
    "objectID": "ho/ho1_1.html#data-visualisation",
    "href": "ho/ho1_1.html#data-visualisation",
    "title": "Data Wrangling with R",
    "section": "1.4 Data Visualisation",
    "text": "1.4 Data Visualisation\n\n1.4.1 Retrieve Information\n\n\n\n\n\n\n⇳ Usage of the code chunk below :\n\n\n\n\n\nplot( ) - ?? - to visualise geospatial features.\n\n\n\n\nplot(mpsz)\n\n\n\n\nPlot only the boundaries - combine both plot( ) together with st_geometry( ) to specifically get the geometry details for plot( ) to plot.\n\nplot(st_geometry(mpsz))\n\n\n\n\nor, specifically indicate which attribute / variable to plot.\n\nplot(mpsz[\"PLN_AREA_N\"])"
  },
  {
    "objectID": "ho/ho1_1.html#projection-transformation",
    "href": "ho/ho1_1.html#projection-transformation",
    "title": "Data Wrangling with R",
    "section": "2.1 Projection Transformation",
    "text": "2.1 Projection Transformation\n\n2.1.1 Inspect & Edit the EPSG Code\n2 common issues encountered when importing geospatial data -\n\nShapefile with missing .proj file.\nThe projected CRS is wrongly assigned.\n\n\n\n\n\n\n\n⇳ Usage of the code chunk below :\n\n\n\n\n\nst_crs( ) - sf - to retrieve coordinate reference system for mpsz.\n\n\n\n\nst_crs(mpsz)\n\nCoordinate Reference System:\n  User input: SVY21 \n  wkt:\nPROJCRS[\"SVY21\",\n    BASEGEOGCRS[\"SVY21[WGS84]\",\n        DATUM[\"World Geodetic System 1984\",\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]],\n            ID[\"EPSG\",6326]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"Degree\",0.0174532925199433]]],\n    CONVERSION[\"unnamed\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",1.36666666666667,\n            ANGLEUNIT[\"Degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",103.833333333333,\n            ANGLEUNIT[\"Degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",1,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",28001.642,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",38744.572,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"(E)\",east,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1,\n                ID[\"EPSG\",9001]]],\n        AXIS[\"(N)\",north,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1,\n                ID[\"EPSG\",9001]]]]\n\n\nThe EPSG code for “svy21” should be 3414, not 9001 as shown above.\n\n\n\n\n\n\n⇳ Usage of the code chunk below :\n\n\n\n\n\nst_set_crs( ) - sf - to replace the coordinate reference system for mpsz.\n\n\n\n\nmpsz3414 &lt;- st_set_crs(mpsz, 3414)\n\n\n\n2.1.2 Transform Geographic Coordinate System to Projected CRS\n\n\n\n\n\n\n⇳ Usage of the code chunk below :\n\n\n\n\n\nst_transform( ) - sf - to reproject x from one coordinate system wgs84 to svy21 mathematically, which is not capable by st_set_crs( ).\n\n\n\n\npreschool3414 &lt;- st_transform(preschool, \n                              crs = 3414)"
  },
  {
    "objectID": "ho/ho1_1.html#aspatial-data-frame-transformation",
    "href": "ho/ho1_1.html#aspatial-data-frame-transformation",
    "title": "Data Wrangling with R",
    "section": "2.2 Aspatial Data Frame Transformation",
    "text": "2.2 Aspatial Data Frame Transformation\n\n\n\n\n\n\n⇳ Usage of the code chunk below :\n\n\n\n\n\nst_as_sf( ) - sf - to convert aspatial object, i.e., listings to an sf object.\n\ncoords - provide x-coordinates first before y-coordinates.\ncrs - define the coordinates reference system with 4326.\n%&gt;% - to nest st_transform() to transform the newly created simple feature data frame into svy21 projected CRS..\n\n\n\n\n\nlistings_sf &lt;- st_as_sf(listings,\n                        coords = c(\"longitude\", \"latitude\"),\n                        crs = 4326) %&gt;%\n  st_transform(crs = 3414)\n\n\nglimpse(listings_sf, 70)\n\nRows: 4,161\nColumns: 17\n$ id                             &lt;dbl&gt; 50646, 71609, 71896, 71903, 2…\n$ name                           &lt;chr&gt; \"Pleasant Room along Bukit Ti…\n$ host_id                        &lt;dbl&gt; 227796, 367042, 367042, 36704…\n$ host_name                      &lt;chr&gt; \"Sujatha\", \"Belinda\", \"Belind…\n$ neighbourhood_group            &lt;chr&gt; \"Central Region\", \"East Regio…\n$ neighbourhood                  &lt;chr&gt; \"Bukit Timah\", \"Tampines\", \"T…\n$ room_type                      &lt;chr&gt; \"Private room\", \"Private room…\n$ price                          &lt;dbl&gt; 80, 145, 85, 85, 49, 184, 79,…\n$ minimum_nights                 &lt;dbl&gt; 92, 92, 92, 92, 60, 92, 92, 6…\n$ number_of_reviews              &lt;dbl&gt; 18, 20, 24, 47, 14, 12, 133, …\n$ last_review                    &lt;date&gt; 2014-12-26, 2020-01-17, 2019…\n$ reviews_per_month              &lt;dbl&gt; 0.18, 0.15, 0.18, 0.34, 0.11,…\n$ calculated_host_listings_count &lt;dbl&gt; 1, 6, 6, 6, 44, 6, 7, 44, 44,…\n$ availability_365               &lt;dbl&gt; 365, 340, 265, 365, 296, 285,…\n$ number_of_reviews_ltm          &lt;dbl&gt; 0, 0, 0, 0, 1, 0, 0, 3, 2, 0,…\n$ license                        &lt;chr&gt; NA, NA, NA, NA, \"S0399\", NA, …\n$ geometry                       &lt;POINT [m]&gt; POINT (22646.02 35167.9…\n\n\nA new column, geometry is introduced while longitude & latitude are dropped from the data frame."
  }
]